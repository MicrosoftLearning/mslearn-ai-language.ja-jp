---
lab:
  title: 音声ライブ API を探索する
  description: Azure AI Foundry プレイグラウンドで利用できる音声ライブ API を使用しカスタマイズする方法について説明します。
---

# 音声ライブ API を探索する

この演習では、Azure AI Foundry でエージェントを作成し、音声プレイグラウンドで音声ライブ API を調べます。 

この演習の所要時間は約 **30** 分です。

> <span style="color:red">**注**:</span>この演習で使用されるテクノロジの一部は、現在、プレビューまたは開発中の段階です。 予期しない動作、警告、またはエラーが発生する場合があります。

> <span style="color:red">**注**:</span>この演習は、コンピューターのマイクに直接アクセスできるブラウザー環境で完了するように設計されています。 Azure Cloud Shell で概念を調べることができますが、対話型音声機能にはローカル オーディオ ハードウェア アクセスが必要です。

## Azure AI Foundry プロジェクトを作成する

まず、Azure AI Foundry プロジェクトを作成します。

1. Web ブラウザーで [Azure AI Foundry ポータル](https://ai.azure.com) (`https://ai.azure.com`) を開き、Azure 資格情報を使用してサインインします。 初めてサインインするときに開いたヒントまたはクイック スタート ウィンドウを閉じます。また、必要に応じて左上にある **Azure AI Foundry** ロゴを使用してホーム ページに移動します。それは次の画像のようになります (**[ヘルプ]** ウィンドウが開いている場合は閉じます)。

    ![エージェントの作成が選択されている Azure AI Foundry ホーム ページのスクリーンショット。](../media/ai-foundry-new-home-page.png)

1. ホーム ページで、**[エージェントを作成する]** を選択します。

1. **エージェントの作成**ウィザードで、プロジェクトの有効な名前を入力します。 

1. **[詳細オプション]** を選択して、次の値を指定します。
    - **Azure AI Foundry リソース**: *既定の名前をそのまま使用します*
    - **[サブスクリプション]**:"*ご自身の Azure サブスクリプション*"
    - **リソース グループ**: *リソース グループを作成または選択します*
    - **[リージョン]**: 次のオプションからリージョンをランダムに選択します。\*
        - 米国東部 2
        - スウェーデン中部

    > \* 執筆時点では、音声ライブ API は、前述のリージョンでのみサポートされています。 場所をランダムに選択すると、1 つのリージョンがトラフィックに圧迫されないようにし、スムーズなエクスペリエンスを実現できます。 サービスの制限に達した場合は、別のリージョンに別のプロジェクトを作成する必要がある可能性があります。

1. **[作成]** を選択し、構成を確認します。 セットアップ プロセスが完了するまで待ちます。

    >**注**: アクセス許可エラーが発生した場合は、**[修正する]** 　ボタンを選択して、続行する適切なアクセス許可を追加します。

1. プロジェクトが作成されると、既定で Azure AI Foundry ポータルのエージェント プレイグラウンドが表示されます。これは次の図のようになります。

    ![Azure AI Foundry ポータルの Azure AI プロジェクトの詳細のスクリーンショット。](../media/ai-foundry-project-2.png)

## 音声ライブのサンプルを開始する

 演習のこのセクションでは、いずれかのエージェントとやり取りします。 

1. ナビゲーション ウィンドウで **[プレイグラウンド]** を選択します。

1. **[音声プレイグラウンド]** グループを見つけて、**[音声プレイグラウンドを試す]** ボタンを選択します。

1. 音声プレイグラウンドには、多くの事前構築済みオプションが用意されています。 水平スクロール バーを使用してリストの末尾に移動し、**[音声ライブ]** タイルを選択します。 

    ![[音声ライブ] タイルのスクリーンショット。](../media/voice-live-tile.png)

1. **[サンプルを試す]** パネルで **[カジュアルなチャット]** エージェントサンプルを選択します。

1. お使いのマイクとスピーカーが動作していることを確認し、ページの下部にある **[スタート]** ボタンを選択します。 

    エージェントと対話する際に、エージェントに割り込むことができ、一時停止して話しを聞くようになることに注目してください。 単語と文の間にさまざまな長さの休止を挟んで話してみてください。 エージェントが会話の一時停止と入力を認識する速度に注目してください。 完了したら、**[終了]** ボタンを選択します。

1. 他のサンプル エージェントを起動して、その動作を調べてみてください。

    さまざまなエージェントを調べる際に、**[構成]** パネルの **[応答指示]** セクションの変化に注目してください。

## エージェントの構成 

このセクションでは、エージェントの音声を変更し、アバターを **[カジュアルなチャット]** エージェントに追加します。 **[構成]** パネルは、次の 3 つのセクションに分かれています。**生成 AI**、**音声**、**アバター**。

>**注:**  構成オプションのいずれかを変更または操作する場合は、**[構成]** パネルの下部にある **[適用]** ボタンを選択してエージェントを有効にする必要があります。

**[カジュアルなチャット]** エージェントを選択します。 次に、以下に示す手順でエージェントの音声を変更し、アバターを追加します。

1. **[音声]** を選択してセクションを展開し、オプションにアクセスします。

1. **[声]** オプションのドロップダウン メニューを選択し、別の声を選択します。

1. **[適用]** を選択して変更を保存し、**[スタート]** を選択してエージェントを起動し、変更点を聞きます。

    前の手順を繰り返して、さまざまな声をいくつか試してみてください。 声の選択が完了したら、次の手順に進みます。

1. **[> アバター]** を選択してセクションを展開し、オプションにアクセスします。

1. トグル ボタンを選択して機能を有効にし、アバターのいずれかを選択します。 

1. **[適用]** を選択して変更を保存し、**[スタート]** を選択してエージェントを起動します。 

    アバターのアニメーションとオーディオとの同期に注目してください。

1. **[> 生成 AI]** セクションを展開し、**[事前エンゲージメント]** トグルをオフの位置に設定します。 次に、**[適用]** を選択して変更を保存し、**[スタート]** を選択してエージェントを起動します。

    **[事前エンゲージメント]** がオフになっている場合、エージェントは会話を開始しません。 エージェントに "あなたの仕事の内容を教えてください" と尋ねて 会話を始めます。

>**ヒント:****[既定値に設定]**、**[適用]** の順に選択すると、エージェントを既定の動作に戻すことができます。

完了したら、次のセクションに進みます。

## 音声エージェントを作成する

このセクションでは、独自の音声エージェントをゼロから作成します。

1. **[独自に試してみる]** セクションで **[空白から開始]** を選択します。 

1. **[構成]** パネルの **[> 生成 AI]** セクションを展開します。

1. **[生成 AI モデル]** ドロップダウン メニューを選択し、**[GPT-4o Mini Realtime]** モデルを選択します。

1. **[応答指示]** セクションに次のテキストを追加します。

    ```
    You are a voice agent named "Ava" who acts as a friendly car rental agent. 
    ```

1. **[応答のランダム性]** スライダーを **0.8** の値に設定します。 

1. **[事前エンゲージメント]** トグルをオンの位置に設定します。

1. **[適用]** を選択して変更を保存し、**[スタート]** を選択してエージェントを起動します。

    エージェントが自己紹介をし、本日どのようにお手伝いできるのかを尋ねます。 エージェントに "木曜日にレンタルできるセダンはありますか?" と質問します。 エージェントが応答するのにかかる時間に注目してください。 エージェントに他の質問をして、応答の様子を確認します。 完了したら、次の手順に進みます。

1. **[構成]** パネルの **[> 音声]** セクションを展開します。

1. **[発話の終了 (EOU)]** トグル ボタンを **[オン]** の位置に設定します。

1. **[オーディオ拡張機能]** トグル ボタンを **[オン]** の位置に設定します。

1. **[適用]** を選択して変更を保存し、**[スタート]** を選択してエージェントを起動します。

    エージェントが自己紹介をしたら、"レンタルできる飛行機はありますか?" と尋ねます。 先ほどよりも、質問後にエージェントが早く応答していることに注目してください。 **[発話の終了 (EOU)]** 設定は、コンテキストとセマンティクスに基づいて一時停止と音声の終了を検出するようにエージェントを構成します。 これにより、より自然な会話が可能になります。

完了したら、次のセクションに進みます。

## リソースをクリーンアップする

演習が完了したら、作成したプロジェクトを削除して、不要なリソースを使用しないようにします。

1. AI Foundry ナビゲーション メニューで **[管理センター]** を選択します。
1. 右側の情報ペインで **[プロジェクトの削除]** を選択し、削除を確認します。

